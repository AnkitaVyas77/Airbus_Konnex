/**
 * Stackla is made available under a commercial licence
 * and is subject to Stackla's Terms of Service.
 *
 * Refer to https://stackla.com/terms-of-service/ 
 * or contact support@stackla.com for further clarification.
 *
 * Built on 2021-05-19 13:05:23
 */
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{enumerable:!0,get:d})},b.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},b.t=function(a,c){if(1&c&&(a=b(a)),8&c)return a;if(4&c&&"object"==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(b.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&c&&"string"!=typeof a)for(var e in a)b.d(d,e,function(b){return a[b]}.bind(null,e));return d},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="https://staging-assetscdn.stackla.com/media/js/dist/",b(b.s=2109)}({1403:function(a,b,c){"use strict";(function(a){c.d(b,"a",function(){return d}),function(){var b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0;b&&b(a)}(),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var d=function(a,b,c,d,e,f){if(!f||!f.isEnabled)return window.open(d,e||"_blank");var g=["https://",f.domain,"/start?widget_id=",a,"&tile_id=",b,"&product_id=",c].join("");fetch(g+"&check=1",{method:"GET",redirect:"manual"}).then(function(a){if("opaqueredirect"!==a.type)throw new Error(a.statusText);window.open(g,e||"_blank"),window.focus()}).catch(function(){window.open(d,e||"_blank"),window.focus()})};!function(){var a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0;a&&a.register(d,"initiateTrackingPixel","/home/ec2-user/workspace/staging/stackla-web/app/media/js/common/utils/tracking-pixel.js")}(),function(){var b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0;b&&b(a)}()}).call(this,c(2)(a))},1783:function(a,b,c){"use strict";(function(a){function d(a){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}var e=c(286),f=c.n(e);!function(){var b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0;b&&b(a)}();var g;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,!function(){function a(a,b){return"string"==typeof b&&"facebook"===a&&(b=function(a){return"string"!=typeof a?a:a.replace(/&#(\d+);/g,function(a,b){return String.fromCharCode(b)})}(b),b=twemoji.parse(b,{className:"tile-emoji"})),b}var b=_.get(window,"Stackla.Widget.Util",{}),c=FluidWidgetCommon.buildHasInteractionCallback(),e=function(a,b,d){return c(a,b,d)};g=function(c,g,h){var i=_.cloneDeep(c);!function(a){for(var b in a)a.hasOwnProperty(b)&&"0"===a[b]&&(a[b]=0)}(g),i.is_custom_tile="stackla"===i.source;var j=function(){var a=window.navigator.userAgent,b=a.indexOf("MSIE ");return!!(b>0||navigator.userAgent.match(/Trident.*rv\:11\./))&&parseInt(a.substring(b+5,a.indexOf(".",b)))}();i.show_comments=i.is_custom_tile?i.enable_comments&&"[EXPAND]"===click_through_url.ct&&h.options.show_comments:g.show_comments&&"[EXPAND]"===click_through_url.ct&&h.options.show_comments,FluidWidgetCommon.isConfigTrue(h.options.show_additional_info)||"text"!==i.media||(i.show_comments=!1),i.original_url=function(a){var b="";return b="twitter"===a.source?"//twitter.com/"+a.user+"/status/"+a.twitter_id:"youtube"===a.source?"//youtu.be/"+a.youtube_id:"flickr"===a.source?"//www.flickr.com/photos/"+a.source_user_id+"/"+a.flickr_id:"facebook"===a.source?void 0!==a.original_url&&a.original_url?a.original_url.replace(/^(http:|https:)/i,""):"//www.facebook.com/"+a.facebook_id.replace("_","/posts/"):"stackla"===a.source?"//"+click_through_url.domain+"/c/"+a._id.$id:a.original_url,a.originalUrl=b,b}(i);var k=["tile",i.source,i.media,i.anonymous&&"anonymous",i.content_only&&"content_only",i.claimed&&"claimed",!i.avatar&&"no-avatar",function(a){var b="";if(void 0!==click_through_url.ct){var c=click_through_url.ct;b="[NONE]"===c?"no-click-through":"[EXPAND]"===c?"rss"===a.source?"original-click-through":"expand-click-through":"[STACKLA_URL]"===c?"stack-click-through":"[TILE_URL]"===c?"tile-click-through":"[ORIGINAL_URL]"===c?"original-click-through":"custom-click-through",void 0!==a.enable_click_through&&a.enable_click_through&&(b="")}return b}(i)],l=i.tags_extended.map(function(a){return"contains-"+("product"===a.type?"product":"tag")+"-"+a.slug});i.tile_classes=k.concat(l).join(" "),i.data_href=function(a){var b="//"+stacklaString(click_through_url.domain).escapeHTML().s,c=a.originalUrl,d=a._id.$id,e=b+"/c/"+d,f="";return void 0!==click_through_url.ct&&(f="[NONE]"===(f=click_through_url.ct)?"":"[EXPAND]"===f?/^[^\[]/.test(f)?f.replace("[EXPAND]",encodeURIComponent(c)):f.replace("[EXPAND]",c):/^[^\[]/.test(f)?(f=(f=(f=f.replace("[STACKLA_URL]",encodeURIComponent(b))).replace("[TILE_URL]",encodeURIComponent(e))).replace("[ORIGINAL_URL]",encodeURIComponent(c))).replace("[TILE_ID]",d):(f=(f=f.replace("[STACKLA_URL]",b)).replace("[TILE_URL]",e)).replace("[ORIGINAL_URL]",c),void 0!==a.enable_click_through&&a.enable_click_through&&(f=a.click_through)),f}(i),i.msg=function(a,b,c,e){if(("stackla"===a||"sta_feed"===a)&&void 0!==e&&e&&"html"===e)return stacklaXSSFilter(b);if("twitter"===a)return c?(b=twttr.txt.autoLink(b,{urlEntities:c,targetBlank:!0}),b=twemoji.parse(b,{className:"tile-emoji"})):b;var f=$.trim(b);if(f){if(f=(f=(f=(f=(f=f.replace(/(<([^>]+)>)/gi,"")).replace(/^[\n\r]*/,"")).replace(/[\n\r]*$/,"")).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_new'>$1</a>")).replace(/[\n]+/g,"<br />"),"facebook"===a){var g=f.match(/@\[[^\]]*\]/g);if(g&&"object"===d(g)&&g.length){var h=/@\[([^:\]]*):([^:\]]*):([^:\]]*)\]/;for(var i in g)if(g.hasOwnProperty(i)){var j=g[i].replace(h,"<a href='http://www.facebook.com/$1' target='_new'>$3</a>");f=f.replace(g[i],j)}}}return f=twemoji.parse(f,{className:"tile-emoji"})}return""}(i.source,i.message,function(a){return void 0!==a.entitlements&&a.entitlements?a.entitlements:a.entities}(i),i.media),i.html=a(i.source,i.html),i.parsed_caption=$.trim($("<div></div>").html(i.msg).text()),i.source_is_twitter="twitter"===i.source,i.show_title=i.title&&"pinterest"!==i.source,i.title_string="rss"===i.source?stacklaString(i.title).decodeHTMLEntities().s.replace(/(<([^>]+)>)/gi,""):stacklaString(i.title).escapeHTML().s,i.ecal_data=!!i.ecal_data&&$.parseJSON(i.ecal_data),i.is_audio="audio"===i.media,i.is_video="video"===i.media,i.isInstagramVideo="video"===i.media&&"instagram"===i.source&&!i.image,i.is_youtube="youtube"===i.video_source,i.show_vine=i.video_source&&"vine"===i.video_source&&(!j||j>8);var m,n=h.enableDoubleColumnSpan&&i.tags_extended.filter(function(a){return"doublecolumnspan"===a.slug}).length>0;if(i.image_s&&!n?(m=i.image_s,i.data_image_width=i.image_width_s,i.data_image_height=i.image_height_s,i.data_image_size="small"):(m=i.image,i.data_image_width=i.imageWidth,i.data_image_height=i.imageHeight,i.data_image_size="standard"),i.img_src=function(a,b){return b.is_audio&&!a?"https://assetscdn.stackla.com/media/images/common/audio-fallback.png":f.a.convertImageToHttps(a,b.source)}(m,i),i.img_class=i.source+"-img tile-image",i.image_alt_text=[i.title,i.html,i.message].join("; "),i.show_shopspots=function(){var a=i.hotspots||[];return!!(h.stackEnabledShopspots&&g.show_shopspots&&i.image)&&!!(a=a.filter(function(a){return!(!a.tag||!a.tag.tag)})).length}(),i.use_custom_shopspot_icon=!!h.appearance.shopspot_icon,i.custom_shopspot_icon=h.appearance.shopspot_icon,i.show_shopspots&&(i.shopspots=_.map(i.hotspots||[],function(a){return a.tag&&a.tag.tag?(i.custom_shopspot_icon||(a.style="background-color: #"+h.appearance.shopspot_btn_background+";",a.inner_style="background-color: #"+h.appearance.shopspot_btn_font_color+";"),a):null}),i.shopspots=_.compact(i.shopspots)),i.avatar_link=function(a){return stacklaString(f.a.getAvatarUrl(a)).escapeHTML().s}(i),i.avatar_url=function(a,b){return f.a.convertImageToHttps(a,b)}(i.avatar,i.source),i.avatar_alt_text=i.name||i.user,"youtube"!==i.source||i.avatar||(i.avatar="https://i3.ytimg.com/i/"+i.source_user_id+"/1.jpg"),i.is_twitter_or_instagram="twitter"===i.source||"instagram"===i.source,i.is_via_facebook=i.to_facebook_id&&i.to_facebook_name,i.via_text="via "+i.to_facebook_name,i.name_handle=i.name||i.user||i.source_user_id,i.formatted_time=b.formatDateTime(i.source_created_at),i.source_type=i.source.replace("sta_feed","stackla"),i.show_tag_container=g.show_tags&&i.tags_extended.filter(function(a){return"1"==a.publicly_visible}).length>0,i.show_likes=i.is_custom_tile?!!i.enable_ups:!!g.show_likes,i.like_is_on=(e("up",i,h)&&i.numUps,h.parent_page_permissions),i.show_dislikes=i.is_custom_tile?!!i.enable_downs:!!g.show_dislikes,i.dislike_is_on=(e("down",i)&&i.numDowns,h.parent_page_permissions),i.totalNumComments=0,"number"==typeof i.numComments&&"number"==typeof i.numDisabledComments&&"number"==typeof i.numQueuedComments&&i.numComments-i.numDisabledComments-i.numQueuedComments>0&&(i.totalNumComments=i.numComments-i.numDisabledComments-i.numQueuedComments),i.show_votes=g.show_votes&&stacklaSocialHub.actionVote(i),i.vote_is_on=e("vote",i,h.parent_page_permissions),h.parent_page_permissions){var o=getUrlVars();o.data_user_id&&o.data_user_hash||(i.show_votes=!1)}return i.show_interactions=i.show_likes||i.show_dislikes||i.show_votes||i.show_comments||g.show_sharing,i.show_claim=function(a,b){var c,d=b.claimConfig,e=b.stackEnabledClaim,f=a.tags||[],g="1"===d.show_claim_button||!0===d.show_claim_button;return!(!(e&&d&&_.include(["twitter","instagram"],a.source)&&!_.isUndefined(a.claimed)&&g)||a.page_post)&&(!(c=d.show_claim_button_on_tags||[]).length||_.intersection(c,f).length>=1)}(i,h),i}}();var h=g;b.a=h,function(){var a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0;a&&(a.register(g,"decorateTileData","/home/ec2-user/workspace/staging/stackla-web/app/media/js/widget/base_waterfall/tile-decorator.js"),a.register(h,"default","/home/ec2-user/workspace/staging/stackla-web/app/media/js/widget/base_waterfall/tile-decorator.js"))}(),function(){var b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0;b&&b(a)}()}).call(this,c(2)(a))},2:function(a,b){a.exports=function(a){if(!a.webpackPolyfill){var b=Object.create(a);b.children||(b.children=[]),Object.defineProperty(b,"loaded",{enumerable:!0,get:function(){return b.l}}),Object.defineProperty(b,"id",{enumerable:!0,get:function(){return b.i}}),Object.defineProperty(b,"exports",{enumerable:!0}),b.webpackPolyfill=1}return b}},2109:function(a,b,c){"use strict";c.r(b),function(a){function b(a){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}var d=c(1783),e=c(286),f=c.n(e),g=c(1403);!function(){var b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0;b&&b(a)}(),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,window.Widget=function(a){function c(a,b){_.each(a,b)}function e(){if(0===tb.length)return!0;var b,c=a(".tile").length,d=tb.length;return b=_a?pb*za:Xa,Stackla.log("needApiCall: (memoryCount - domCount) > numItemsToLoad, "+(d-c)+" > "+b),d-c<=b}function h(a,b){tb=_.reject(tb,s),b?_.each(a,function(a){_.includes(ub,a._id.$id)||(ub.push(a._id.$id),tb.push(a))}):_.each(a,function(a){_.includes(ub,a._id.$id)||(ub.push(a._id.$id),tb.splice(0,0,a))}),vb=_.sortByOrder(vb,["current_pinned_position","source_created_at"],["asc","asc"]);var c=0,d=B();_.each(vb,function(a){for(var b=parseInt(a.current_pinned_position),e=!!a.current_pinned_always;;){var f=b+c-1;if(!tb[f]||!tb[f].is_pin){(b<=d||e)&&tb.splice(f,0,a);break}c++}})}function i(a,c){if("object"===b(a.filters_pinned_on)){for(var d in a.filters_pinned_on)if(a.filters_pinned_on[d].filter_id===c)return a.filters_pinned_on[d];for(var d in a.filters_pinned_on)if(0===a.filters_pinned_on[d].filter_id)return a.filters_pinned_on[d]}return!1}function j(a){var c=parseInt($);if(a&&"object"==b(a)&&a.length)for(var d in a)if(a[d].is_pin&&void 0!==a[d].filters_pinned_on){var e;!1!==(e=i(a[d],c))&&(a[d].current_pinned_position=e.position,a[d].current_pinned_always=e.always,vb.push(a[d]),ub.push(a[d]._id.$id))}vb.sort(function(a,b){return a.current_pinned_position-b.current_pinned_position})}function k(){var b;Stackla.log("[inside] loadInitData() call start"),Za=!0,sb=!0,va=new Date,b=ba?a.Deferred().resolve([]):a.ajax({url:m(X,Y,Z,V,da,$),dataType:"json"}),a.when(b,a.ajax({url:z(Q,X,Y,Z,Ya,V,$,da,hb,ib,jb),dataType:"json"})).done(function(a,b){wa=new Date,Stackla.log("[inside] loadInitData() call finished");var c=a[0],d=b[0];j(c),h(d,!0),d.length&&("undefined"!=typeof _gaq&&_gaq.push(["_trackPageview",Q]),Ya+=1),C(),E(),Ra(),Fb=!0,I(),Za=!1,sb=!1})}function l(b){Stackla.log("[inside] Pin API call start"),a.ajax({url:m(X,Y,Z,V,da,$),type:"get",dataType:"json",success:function(a){Stackla.log("[inside] Pin API call end"),j(a),b()}})}function m(a,b,c,d,e,f){return"/widget/pins"+(c?"?draft_id="+c+"&":b?"?wid="+b+"&":"/"+a+"?")+"&ttl="+d+"&domain="+e+"&filter_id="+f}function n(a,b,c){for(var d in tb)tb[d]._id.$id==a&&(tb[d][b]=c)}function o(b,c,d){var e=a("#"+b).find(".tile-interaction-vote");e.length&&(c?e.addClass("on"):e.removeClass("on"),e.find("span").text(d))}function p(b,c){var d=a("#"+b),e=a('<div class="competition-vote-message">'+stacklaString(c).escapeHTML().s+"</div>"),f=a('<div class="competition-vote-message-overlay"></div>'),g=a('<div class="competition-vote-message-wrapper"></div>');d.append(g.append(f).append(e)),setTimeout(function(){g.remove()},3e3)}function q(c,d,e,f){if(("stackla"===c||"sta_feed"===c)&&void 0!==f&&f&&"html"===f)return stacklaXSSFilter(d);if("twitter"==c)return e?(d=twttr.txt.autoLink(d,{urlEntities:e,targetBlank:!0}),d=twemoji.parse(d,{className:"tile-emoji"})):d;var g=a.trim(d);if(g){if(g=(g=(g=(g=(g=g.replace(/(<([^>]+)>)/gi,"")).replace(/^[\n\r]*/,"")).replace(/[\n\r]*$/,"")).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_new'>$1</a>")).replace(/[\n]+/g,"<br />"),"facebook"===c){var h=g.match(/@\[[^\]]*\]/g);if(h&&"object"==b(h)&&h.length){var i=/@\[([^:\]]*):([^:\]]*):([^:\]]*)\]/;for(var j in h){var k=h[j].replace(i,"<a href='http://www.facebook.com/$1' target='_new'>$3</a>");g=g.replace(h[j],k)}}}return g=twemoji.parse(g,{className:"tile-emoji"})}return""}function r(a,b){return f.a.convertImageToHttps(a,b)}function s(a){if(vb.length)for(var b in vb)if(vb[b]._id.$id==a._id.$id)return!0;return!1}function t(b){var c,e,f=function(a,b,c){var e=Object(d.a)(a,b,c);return e.play_inline_youtube=a.is_youtube&&"[NONE]"===ha.click_through_url,e}(b,Ca,S);return Stackla.log("[inside] createTile() is executed"),t.template||(t.template=a("#tpl-tile").html()),c=t.template,e=a(Mustache.render(c,f)),Ca.show_sharing&&e.find(".tile-interactions").append(Ab(b)),"stackla"===b.source&&"official"===b.type&&Pa(e,b),window.fluidWidgetCustomCallbacks.onCompleteJsonToHtml(e,f)}function u(){if(bb){var a=getUrlVars();if(void 0!==a.data_user_id&&a.data_user_id&&void 0!==a.data_user_hash&&a.data_user_hash){var b="";return void 0!==a.data_user_name&&a.data_user_name&&(b=a.data_user_name),"data_user_id="+a.data_user_id+"&data_user_hash="+a.data_user_hash+"&data_user_name="+b}}return""}function v(a,b,c){var d=[];d.push("widget_id="+X),d.push("filter_id="+$),d.push("source="+a),d.push("source_user_id="+b),d.push("tile_id="+c);var e=u();return e&&d.push(e),void 0!==ma&&ma&&ma.terms_and_conditions&&d.push("tcurl="+encodeURIComponent(ma.terms_and_conditions)),void 0!==ma&&ma&&ma.show_content_toggle&&d.push("show_content_toggle=1"),"https://"+na+"/claim/start?"+d.join("&")}function w(a,b,c){N("openclaimedlightbox",{url:v(a,b,c)})}function x(b,c){var d=_.find(tb,function(a){return b===a._id.$id});"expand"===c?a(document).trigger("tileExpand",[d]):a(document).trigger("tileClick",[d]),EventMixin.emit("tileExpand",[{expandType:c,tileData:d,widgetId:X}],function(){N("tileExpand",{expandType:c,tileData:d})})}function y(b,c){var d=t(b);-1===c?P.append(d):0===c?P.prepend(d):a("#container .tile:eq("+(c-1).toString()+")").before(d),b.video&&!b.image&&-1===nb.indexOf(b._id.$id)&&(a.get("/cs/image/disable",{_id:b._id.$id,stack_id:aa}),nb.push(b._id.$id)),d.find(".tile-image-wrapper img").each(function(){a(this).imagesLoaded(function(){var a=this;setTimeout(function(){Ga(a)},200)})}),d.find(".avatar-profile-image").each(function(){a(this).imagesLoaded(function(){!function(b){var c=a(b).closest(".tile"),d=c.attr("id"),e=c.attr("network"),f=c.attr("identity"),g=a(b).naturalWidth(),h=a(b).naturalHeight(),i=!1;if(g<=30&&h<=30&&(i=!0),"youtube"===e&&g<=48&&h<=48&&(i=!0),i){a(b).css("visibility","hidden");var j=e+f,k=a.cookie("broken_avatar"),l=k?k.split(","):[];a(b).hide(),-1===a.inArray(j,l)&&(l.push(j),a.cookie("broken_avatar",l.join(","),{expires:365,path:"/; SameSite=None",secure:!0}),a.inArray(e,["twitter","facebook","flickr","gplus","youtube"])+1&&a.get("/widget/update_avatar/"+X+"?tile_id="+d))}else a(b).parents(".tile-avatar-wrapper").find(".tile-avatar-placeholder").hide()}(this)})}),d.find(".js-claim-tile").click(function(){var b=a(this).attr("data-source-user-id");w(a(this).attr("data-source"),b,a(this).attr("data-tile-id"))}),Ia(d),setTimeout(function(){N("impression",{tileData:b,filterId:$,widgetId:X})}),window.fluidWidgetCustomCallbacks.onCompleteAddingToDom(d),function(b,c){var d,e=b.attr("id");if(d=(b.hasClass("tile-click-through")?"tile":b.hasClass("stack-click-through")&&"stack")||b.hasClass("original-click-through")&&"original"||b.hasClass("expand-click-through")&&"expand"||b.hasClass("no-click-through")&&"none"||b.hasClass("custom-click-through")&&"custom",b.find(".tile-tag").on("click",function(a){var b={domain:ya.tracking_pixel_domain,isEnabled:_.get(ya.stack_config,"tracking_pixel",0)},d=a.target.getAttribute("data-tag-id");d=d?parseInt(d):0;var e=_.find(c.tags_extended,{id:d});a.preventDefault(),a.stopPropagation(),Object(g.a)(X,_.get(c,"_id.$id"),e.ext_product_id,e.custom_url,e.target,b)}),b.filter(".tile:not(.no-click-through,.expand-click-through)").on("click",function(){var b=a(this);b.attr("data-href")&&window.open(b.attr("data-href"),"_blank").focus(),x(e,d)}),b.filter(".expand-click-through").on("click",function(){x(e,d),K(e,d)}),b.filter(".expand-click-through").find(".tile-interaction-comment .tile-interaction-link").on("click",function(b){var c=a(b.currentTarget).parents(".tile-interaction-comment")?"comment":null;x(e,d),K(e,"expanded-tile",c)}),c.play_inline_youtube){var f="//www.youtube.com/embed/"+c.embed_url+"?autoplay=1";b.find(".play-inline-youtube").on("click",function(){b.append('                <div class="tile-youtube-wrapper">                    <iframe type="text/html" src="'+f+'" frameborder="0" />                     <div class="tile-youtube-close"><big>&times;</big> &nbsp; close</div>                 </div>')}),b.on("click",".tile-youtube-close",function(){b.find(".tile-youtube-wrapper").remove()})}b.find("a").click(function(b){var c,d,f=a(b.currentTarget);if(b.stopPropagation(),d=_.find(tb,function(a){return e===a._id.$id}),(f.hasClass("tile-user-top")||f.hasClass("tile-user-bottom"))&&(EventMixin.emit("userClick",[{shareNetwork:c,tileData:d,widgetId:X}]),N("userClick",{tileData:d})),f.hasClass("tile-share-button")){if(!(c=(f.hasClass("facebook")?"facebook":f.hasClass("twitter")&&"twitter")||f.hasClass("pinterest")&&"pinterest"||f.hasClass("gplus")&&"gplus"||f.hasClass("linkedin")&&"linkedin"||f.hasClass("email")&&"email"))return;EventMixin.emit("shareClick",[{shareNetwork:c,tileData:d,widgetId:X}]),N("shareClick",{shareNetwork:c,tileData:d})}}),window.postRender&&window.postRender(b)}(d,b)}function z(b,c,d,e,f,g,h,i,j,k,l){var m={page:f,ttl:g,filter_id:h,domain:i,tags_grouped_as:lb,data_tags:kb,search:j,geohash:ra,tile_id:ba,tag_group:k,available_products_only:l};return e?m.draft_id=e:d?m.wid=d:b+="/"+c,b+"?"+a.param(m)}function A(){Stackla.log("[inside] noMoreContentToLoad() is executed"),W&&W.hide(),Eb=!0}function B(){return _a?(ab+1)*(pb*za):(ab+1)*Xa}function C(b){var d,e=B(),f=[],g=[],h=[],i=[];c(tb,function(a,b){b<e&&(h.push(a),i.push(a._id.$id))}),Stackla.log("_resync contentShouldBeVisibleTileIds "+i),c(h,function(b){var c=b._id.$id;a("#"+c).length||(f.push(b),g.push(c))}),Stackla.log("_resync contentToAddTileIds "+g),function(b,c){var d;if(b.length){for(d in Stackla.log("[inside] appendTiles() is executed"),window.fluidWidgetCustomCallbacks.onBeforeRenderTiles(c,b),b)b.hasOwnProperty(d)&&y(b[d],-1);window.fluidWidgetCustomCallbacks.onCompleteRenderTiles(a(c),b),a(document).trigger("tilesAppend",[b])}}(f,g),P.find(".tile").each(function(){var b=a(this),c=b.attr("id");(function(a,b){return _.includes(a,b)})(i,c)||P.isotope("remove",b)}),c(i,function(b){var c=P.find(".tile:last");d=a("#"+b),c.length&&d.length&&!c.is(d)&&c.after(d)}),b&&b()}function D(){var a=P.width();pb=a<480?1:a<800?2:Math.ceil((a-qb)/($a+qb)),ob.width=Math.floor(a/pb-qb);var b=window.fluidWidgetCustomCallbacks.onBeforeRenderIsotope(a,$a,qb,pb,ob.width);pb=b.numColumns,ob.width=b.tileWidth}function E(){Stackla.log("[inside] resizeTiles() is executed"),D(),P.find(".tile").each(function(){Ia(a(this))}),P.isotope({masonry:{columnWidth:ob.width+qb,gutterWidth:0}}),P.isotope("reloadItems").isotope({sortBy:"original-order"}),N("resize",{height:a("body").height()})}function F(b,c,d){var e={},g=q(c.source,c.message,function(a){return void 0!==a.entitlements&&a.entitlements?a.entitlements:a.entities}(c),c.media);if(void 0!==c.in_reply_to_message&&c.in_reply_to_message){var h=q(c.source,c.in_reply_to_message,function(a){return void 0!==a.in_reply_to_entitlements&&a.in_reply_to_entitlements?a.in_reply_to_entitlements:a.in_reply_to_entities}(c),c.media);c.in_reply_to_message=h}if(c.message=g,void 0!==c.avatar){var i=function(a,b){return f.a.convertImageToHttps(a,b)}(c.avatar,c.source);c.avatar=i}if(void 0!==c.image){var j=r(c.image,c.source);c.image=j}if(void 0!==c.image_s){var k=r(c.image_s,c.source);c.image_s=k}c.html=function(b){if(void 0!==oa&&oa){var c=a("<div></div>").html(b||""),d="";return c.find("a[href*=videocloud]").each(function(){var b=a(this).attr("href"),c=void 0!==a(this).attr("data-width-ratio")&&a(this).attr("data-width-ratio")?parseInt(a(this).attr("data-width-ratio")):16,e=void 0!==a(this).attr("data-height-ratio")&&a(this).attr("data-height-ratio")?parseInt(a(this).attr("data-height-ratio")):9,f=Math.round(e/c*100),g=b.split(":");if(2===g.length){var h=g[1].trim(),i=Mustache.render('<div class="stacklapopup-video-wrapper">                 <div class="stacklapopup-video-wrapper-inner">                 <div class="stacklapopup-video youtube" style="padding-top:{{paddingTop}}%">                 <div style="display:none"></div>                 <script language="JavaScript" type="text/javascript" src="https://web-assets.stackla.com/app.stackla.com/media/js/brightcove/BrightcoveExperiences.js"></script>                 <object id="myExperience" class="BrightcoveExperience">                     <param name="bgcolor" value="#FFFFFF" />                     <param name="width" value="100%" />                     <param name="height" value="360" />                     <param name="playerID" value="3630509963001" />                     <param name="playerKey" value="AQ~~,AAADTUgVWiE~,UqcbIDJjAYfynuLYO1eFaMb4W-Vpee7J" />                     <param name="isVid" value="true" />                     <param name="isUI" value="true" />                     <param name="dynamicStreaming" value="true" />                     <param name="secureConnections" value="true" />                     <param name="secureHTMLConnections" value="true" />                     <param name="autoStart" value="true" />                     <param name="@videoPlayer" value="{{videoId}}" />                 </object>                 <script type="text/javascript">setTimeout(function(){brightcove.createExperiences()},500)</script>                 </div></div></div>',{videoId:h,paddingTop:f});d+=i}}),d+c.html()}return b}(c.html),e.action="lightbox",e.data=c,e.options=ca||{},e.widgetId=X,e.tileId=b,e.widgetType="vertical",e.videoHtml=StacklaVideoPlayer.getEmbedCode("#tpl-video",a.extend({},c)),e.widgetSetting=ya,e.widgetConfig=ya,d&&(e.focusOn=d),e.lightboxCustomJs=ja,e.lightboxCustomCss=ia;var l=[];c.productsHtml="",l=_.filter(c.tags_extended,{type:"product"}),(l=_.map(l,function(a){return a.cta_text=a.cta_text||"Buy Now",a})).length&&(c.productsHtml=Mustache.render(a("#tpl-product-list").html(),{products:l}));var m={like:{on:Ma("up",c),count:c.numUps?c.numUps:""},dislike:{on:Ma("down",c),count:c.numDowns?c.numDowns:""},vote:{on:Ma("vote",c),count:c.numVotes?c.numVotes:""}};c.interactionData=m,c.allTagData=mb,ca.claimEnabled=function(a){var b,c=a.tags||[],d="1"===ma.show_claim_button||!0===ma.show_claim_button;return!(!(ka&&ma&&_.include(["twitter","instagram"],a.source)&&!_.isUndefined(a.claimed)&&d)||a.page_post)&&(!(b=ma.show_claim_button_on_tags||[]).length||_.intersection(b,c).length>=1)}(c),ca.claimActionUrl=v(c.source,c.source_user_id,c._id.$id),ca.tile_show_votes=!(!ca.show_votes||!stacklaSocialHub.actionVote(c)),N("lightbox",e)}function G(){ba="",hb="",Ya=1,ab=0,tb.length=0,ub.length=0,vb.length=0,Db=!1,Eb=!1,ib="",jb=!1,P.isotope("remove",a(".tile"))}function H(){a(".button").css("visibility","hidden"),W&&(W.show(),W.css("width","auto")),Ba.show()}function I(){ba||a(".button").css("visibility","visible"),setTimeout(function(){Ba.hide()},1e3),ua=new Date}function J(b){var c=[];return(b=a.extend(!0,{},b)).products={},_.each(b.hotspots,function(a){!!_.find(c,function(b){return b==a.tag.id})&&(b.products[a.tag.id]=a.tag)}),b}function K(a,b,c){FluidWidgetCommon.buildExpandTileCallback(tb,J,F,ca)(a,c)}function L(b){a.get("/stackdotla/tile_shared?tile_id="+b+"&stack_id="+aa),a(document).trigger("tileShare",[{_id:b}])}function M(b){if(void 0!==b.image){var c=a("<img />").attr({src:b.image,"data-safe-content-id":b._id.$id});c.imagesLoaded(function(){!function(b){var c=a(b).naturalWidth(),d=a(b).naturalHeight();if(c>30&&d>30){var e=a(b).attr("data-safe-content-id");for(var f in Gb)Gb[f]._id.$id===e&&(Gb[f].safe_image=!0);for(var f in Lb)Lb[f]._id.$id===e&&(Lb[f].safe_image=!0);a(b).attr({"data-audit-result":"ok","data-image-width":c,"data-image-height":d}),Kb+=1}}(c)}),ea.append(c)}}function N(a,b){if((b=b||{}).action=a,Stackla.log("[inside->outside] "+a),b.uniqueId=Bb,b.widgetType=fb,b.widgetId=X,b.filterId=$,b.hashId=Y,b.parentPagePermissions=null,b.shopspotsEnabled=la,b.layoutType=fa,b.styleName=ga,b.appearance=ha,b.widgetConfig=ya,bb){var c=getUrlVars();b.parentPagePermissions={on:!0,userId:c.data_user_id?c.data_user_id:null,userHash:c.data_user_hash?c.data_user_hash:null,userName:c.data_user_name?c.data_user_name:null,parent_page_ext_username:cb}}parent.postMessage(JSON.stringify(b),"*")}function O(){ab+=1,(_a?Qa:Fa)(function(){N("moreLoad",{page:ab}),EventMixin.emit("moreLoad",[{page:ab,widgetId:X,hasMore:!Eb}]),E()})}var P,Q,R,S,T,U,V,W,X,Y,Z,$,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,Ya=1,Za=!1,$a=320,_a=!0,ab=0,bb=!1,cb=!1,db="",eb="",fb="vertical",gb=[],hb="",ib="",jb=!1,kb="",lb="",mb=[],nb=[],ob=[],pb=5,qb=0,rb=Stackla.WidgetProfiling,sb=!1,tb=[],ub=[],vb=[],wb=function(){var a=FluidWidgetCommon.buildLikeDislikeCallback();return function(b,c,d){return a(b,c,d||function(){N(c+"Click",{tileData:_.find(tb,function(a){return b===a._id.$id}),filterId:$,widgetId:X})},tb,X,Y,Na,Ma)}}();Ja=function(a,b){return b=b||"log",!(!window.console||!window.console[b]||(window.console[b](a),0))},Oa=function(b,c){c=c||function(){N("voteClick",{tileData:_.find(tb,function(a){return b===a._id.$id}),filterId:$,widgetId:X})};var d,e,f,g,h,i,j,k,l=a("#"+b).find(".tile-interaction-vote");if(l.hasClass("on"))p(b,"A vote has already been registered from this IP address.");else{for(k in tb)if(tb[k]._id.$id===b){h=tb[k];break}for(var m in gb)if(gb[m]._id.$id===b){h=gb[m];break}if(!h)return Ja("No matched tile data.","warn"),!1;if(d=h.numVotes?parseInt(h.numVotes):0,Ma("vote",h))p(b,"A vote has already been registered from this IP address.");else{if(j={vote:{on:l.hasClass("on"),count:d}},f="/widget/competition_vote/"+X,g=["wid="+Y,"tile_id="+b,"addordelete=1"],bb){if(!(e=getUrlVars()).data_user_id||!e.data_user_hash)return void Ja("Oops, an error occurred with the vote interaction: Invalid user ID and hash combination.","error");var q=u();q&&g.push(q)}o(b,!0,(i={vote:{on:!0,count:d+1}}).vote.count),c(i),n(b,"numVotes",d+1),a.ajax({url:f,type:"POST",data:g.join("&"),success:function(d){return d.success?(Na("vote",b,1),void a(document).trigger("tileVote",[{_id:b}])):(Ja(d.error,"warn"),n(b,"numVotes",j.vote.count),o(b,!1,j.vote.count),j.vote.error=d.error,c(j),void p(b,d.error))},error:function(){n(b,"numVotes",j.vote.count),o(b,!1,j.vote.count)}})}}};var xb=FluidWidgetCommon.buildAddInteractionToCookieCallback();Na=function(a,b,c){return xb(a,b,c,bb)};var yb=FluidWidgetCommon.buildHasInteractionCallback();Ma=function(a,b){return yb(a,b,bb)},Ga=function(b){var c,d,e,f,g=b.naturalWidth(),h=b.naturalHeight(),i=a(b).closest(".tile").attr("id");g>32&&h>32?(b.parent(".tile-image-wrapper").width()/b.parent(".tile-image-wrapper").height()!=1?(c=100,d=100,f=0,e=0):g<h?(c=100,d=Math.ceil(100*h/g),f=-1*Math.floor((d-100)/2),e=0):(c=Math.ceil(100*g/h),d=100,f=0,e=-1*Math.floor((c-100)/2)),a(b).css({width:c+"%",height:100===d?"auto":d+"%",marginLeft:e+"%",marginTop:f+"%"}),a(b).parent(".tile-image-wrapper").find(".tile-media-loading").hide(),void 0!==a(b).attr("data-image-width")&&a(b).attr("data-image-width")&&void 0!==a(b).attr("data-image-height")&&a(b).attr("data-image-height")||Ua(i)||a.get("/cs/image",{_id:i,stack_id:aa,width:g,height:h,imageSize:a(b).attr("data-image-size")&&a(b).attr("data-image-size").length?a(b).attr("data-image-size"):"standard"})):a.get("/cs/image/disable",{_id:i,stack_id:aa}),window.fluidWidgetCustomCallbacks.onCompleteRenderImage(b)},Ua=function(b){var c=(a.cookie("csHistory")?a.cookie("csHistory"):"").split(",");return!!(a.inArray(b,c)+1)||(c.push(b),a.cookie("csHistory",c.join(","),{expires:7,path:"/; SameSite=None",secure:!0}),!1)},Ia=function(b){var c,d,e=a(b),f=e.find(".tile-content"),g=e.find(".tile-image-wrapper"),h=g.find("img"),i=window.fluidWidgetCustomCallbacks.getTileWidth(b,ob.width,qb,pb),j=i-parseInt(e.css("border-left")||0,10)-parseInt(e.css("border-right")||0,10)-parseInt(f.css("padding-left")||0,10)-parseInt(f.css("padding-right")||0,10)-parseInt(f.css("margin-left")||0,10)-parseInt(f.css("margin-right")||0,10),k=j;Stackla.log("[inside] calculateDimensions() is executed"),g.length&&h.length&&(c=h.attr("data-image-width"),d=h.attr("data-image-height"),void 0!==c&&c&&void 0!==d&&d&&(k=Math.round(j/(c/d)))),g.css("height",k+"px"),e.css("width",i+"px");var l=a(b).find(".tile-video-wrapper .vine-embed");l.length>0&&Math.abs(k-l.attr("width"))>150&&l.css("height",k+"px").attr("width",k).attr("height",k).attr("src",l.attr("src"));var m,n,o=a(b).find(".tile-html");o.length&&o.data("widthRatio")&&o.data("heightRatio")&&(m=o.data("widthRatio"),n=o.data("heightRatio"),o.css({width:j+"px",height:Math.round(j/(m/n))+"px"})),window.fluidWidgetCustomCallbacks.onCalculateDimensions(b)},Ta=function(a){var b="//"+stacklaString(click_through_url.domain).escapeHTML().s,c=a.originalUrl,d=a._id.$id,e=b+"/c/"+d,f="";return void 0!==click_through_url.ct&&(f="[NONE]"==(f=click_through_url.ct)?"":"[EXPAND]"==f?"rss"!==a.source?"":/^[^\[]/.test(f)?f.replace("[EXPAND]",encodeURIComponent(c)):f.replace("[EXPAND]",c):/^[^\[]/.test(f)?(f=(f=(f=f.replace("[STACKLA_URL]",encodeURIComponent(b))).replace("[TILE_URL]",encodeURIComponent(e))).replace("[ORIGINAL_URL]",encodeURIComponent(c))).replace("[TILE_ID]",d):(f=(f=f.replace("[STACKLA_URL]",b)).replace("[TILE_URL]",e)).replace("[ORIGINAL_URL]",c),
void 0!==a.enable_click_through&&a.enable_click_through&&(f=a.click_through)),f},Sa=function(a){var b="";if(void 0!==click_through_url.ct){var c=click_through_url.ct;b="[NONE]"==c?"no-click-through":"[EXPAND]"==c?"rss"===a.source?"original-click-through":"expand-click-through":"[STACKLA_URL]"==c?"stack-click-through":"[TILE_URL]"==c?"tile-click-through":"[ORIGINAL_URL]"==c?"original-click-through":"custom-click-through",void 0!==a.enable_click_through&&a.enable_click_through&&(b="")}return b},Pa=function(a,b){var c=!(void 0===b.anonymous||!b.anonymous),d=!(void 0===b.content_only||!b.content_only),e=!!d,f=!(void 0===b.enable_ups||b.enable_ups),g=!(void 0===b.enable_downs||b.enable_downs),h=!(void 0===b.enable_comments||b.enable_comments);!(!c&&!d)&&(a.find(".tile-user-info").remove(),a.find(".tile-official-star").remove(),a.find(".tile-avatar-wrapper").remove(),a.find(".userHeader").remove()),e&&(a.find(".tile-belt").remove(),a.find(".tile-timestamp").remove(),a.find(".tile-tags").remove(),a.find(".tweetMeta").remove(),a.find(".expandedTileButtons hr:nth-child(2)").remove(),a.find(".lightboxComment").remove(),a.find(".lightboxComments").remove(),a.find(".expanded-tile-tags").remove(),a.find(".tile-interaction-share").remove(),a.find(".tile-interaction-vote").remove()),f&&a.find(".tile-interaction-like").remove(),g&&a.find(".tile-interaction-dislike").remove(),h&&(a.find(".tile-interaction-comment").remove(),a.find(".lightboxComment").remove(),a.find(".lightboxComments").remove()),a.find(".tile-interactions").html()||(a.find(".tile-interactions").remove(),a.removeClass("has-interactions"),a.find(".expandedTileButtons hr:nth-child(2)").remove())};var zb,Ab=FluidWidgetCommon.createInlineSharingButtonsGen2;Ha=function(b){sb||(sb=!0,a.ajax({url:z(Q,X,Y,Z,1,V,$,da,hb,ib,jb),type:"GET",dataType:"json",success:function(c){var d=0,e=[];if(c.length)for(var f=c.length;f--;)-1===a.inArray(c[f]._id.$id,ub)&&(d+=1,e.push(c[f]));d&&(h(e,!1),C()),void 0!==b&&b(),setTimeout(function(){Ba.hide()},1e3),sb=!1}}))},La=function(){for(var b=1;b<Ya;)a.ajax({url:z(Q,X,Y,Z,b,V,$,da,hb,ib,jb),type:"GET",dataType:"json",success:function(a){for(var b in a){var c=a[b]._id.$id;for(var d in tb)if(tb[d]._id.$id==c&&a[b].numVotes&&!isNaN(parseInt(a[b].numVotes))){var e=P.find("#"+c+" .js-vote-count");if(e.length){var f=isNaN(parseInt(e.text()))?0:parseInt(e.text());parseInt(a[b].numVotes)>f&&(tb[d].numVotes=a[b].numVotes,e.text(a[b].numVotes))}}}}}),b+=1},Fa=function(b){if(!sb)if(sb=!0,e()){var c=z(Q,X,Y,Z,Ya,V,$,da,hb,ib,jb);a.ajax({url:c,type:"GET",dataType:"json",success:function(a){a.length?("undefined"!=typeof _gaq&&_gaq.push(["_trackPageview",c]),Ya+=1):A(),h(a,!0),C(function(){sb=!1}),b&&b(),setTimeout(function(){Ba.hide()},1e3)}})}else C(function(){sb=!1,setTimeout(function(){Ba.hide()},1e3)}),b&&b()},Qa=function(b){Stackla.log("[inside] fluidRendering() is executed"),!Za&&e()?(Za=!0,Stackla.log("[inside] Content API call() starts"),a.ajax({url:z(Q,X,Y,Z,Ya,V,$,da,hb,ib,jb),type:"GET",dataType:"json",success:function(c){Stackla.log("[inside] Content API call() finishes"),Za=!1,h(c,!0),c.length&&("undefined"!=typeof _gaq&&_gaq.push(["_trackPageview",Q]),Ya+=1),C(function(){!c.length&&tb.length<=a(".container").find(".tile").length&&A(),b&&b()}),setTimeout(function(){Ba.hide()},1e3)}})):C(function(){b&&b()})},a(window).resize(_.debounce(function(){zb!==a(window).width()&&(Stackla.log("[inside] resize"),zb=a(window).outerWidth(),D(),_a?Qa(function(){E()}):E())},500)),Ra=function(){N("initComplete",{name:pa,filterId:$,externalJs:eb,lightboxCustomJs:ja,lightboxCustomCss:ia,options:ca,style:{show_powered_by_stackla:Wa,click_through_url:ha.click_through_url}})};var Bb,Cb,Db=!1,Eb=!1,Fb=!1,Gb=[],Hb=1,Ib=500,Jb=!1,Kb=0,Lb=[],Mb={initialize:function(b){Stackla.log("[inside] initialize start"),S=b,X=stacklaString(S.widgetId).escapeHTML().s,Y=stacklaString(S.hashId).escapeHTML().s,Z=stacklaString(S.draftId).escapeHTML().s,$=stacklaString(S.filterId).escapeHTML().s,aa=stacklaString(S.stackId).escapeHTML().s,ta=S.requestParams,Bb=S.requestParams.unique_id,fa=S.options.layout,ga=S.style,pa=S.name,qa=S.widgetTypeName,ha=S.appearance,Wa=S.show_powered_by_stackla,Q=S.api,qb=S.margin,za=S.numRows,ca=S.options,xa=S.stackConfig,ya=S._setting,Ca=S.inlineTileOptions,da=stacklaString(S.alias).escapeHTML().s,-1==za&&(_a=!1),$a=S.tileDimension.width,ob={width:S.tileDimension.width},T=void 0!==S.pollingFrequency&&S.pollingFrequency,U=void 0!==S.autoRefresh&&S.autoRefresh,V=stacklaString(S.ttl).escapeHTML().s,Da=S.loadMoreType,Xa=S.itemPerPage,bb=S.parent_page_permissions,cb=S.parent_page_ext_username,db=S.stackShortName,eb=S.externalJs,ia=S.lightboxCustomCss,ja=S.lightboxCustomJs,ka=S.stackEnabledClaim,la=S.stackEnabledShopspots,ma=S.claimConfig,na=S.imDomain,S.trackingPixelDomain,oa=S.enableBrightcoveVideoCloud,hb=S.requestParams&&S.requestParams.search?S.requestParams.search:"",kb=S.requestParams&&S.requestParams.data_tags?S.requestParams.data_tags:"",ra=S.requestParams&&S.requestParams.geohash?S.requestParams.geohash:"",lb=S.requestParams&&S.requestParams.tags_grouped_as?S.requestParams.tags_grouped_as:"",sa=S.strings,ba=S.requestParams&&S.requestParams.tile_id||"",ib=_.get(S,"requestParams.tag_group",""),jb=_.get(S,"requestParams.available_products_only"),window.stackId=aa,Widget.crossSiteAction("handShakeEstablished"),(P=a("#container")).css({"padding-top":qb+"px","padding-left":qb+"px"}),P.isotope({itemSelector:".tile",animationEngine:"css"}),(R=a(".track")).css({width:"100%"}),Aa=a("<div>").addClass("spinner"),(Ba=a("<div>").addClass("spinner-overlay")).append(Aa),R.append(Ba),D(),void 0!==window.multipleScreensSafeContent?(!function b(){Stackla.log("addSafeContent() is executed."),a.ajax({url:z(Q,X,Y,Z,Hb,V,$,da,hb,ib,jb),type:"GET",dataType:"json",success:function(c){if(Jb)for(var d=c.length;d--;){var e=c[d];-1===a.inArray(e._id.$id,ub)&&(ub.push(e._id.$id),e.safe_image=!1,Gb.splice(0,0,e),M(e))}else for(var d in c)e=c[d],-1===a.inArray(e._id.$id,ub)&&(ub.push(e._id.$id),e.safe_image=!1,Gb.push(e),M(e));c.length<Xa?(Hb=1,Ib=1e4,Jb=!0):Jb||(Hb+=1),Kb<Xa&&setTimeout(function(){b()},Ib)}})}(),setInterval(function(){a.ajax({url:z(Q,X,Y,Z,1,V,$,da,hb,ib,jb),type:"GET",dataType:"json",success:function(b){if(b.length)for(var c in b){var d=b[c];-1===a.inArray(d._id.$id,ub)&&(ub.push(d._id.$id),d.safe_image=!1,Lb.push(d),M(d))}}})},1e4)):k(),"scroll"===Da?(Ea=a(".js-scroll-loading")).text(sa.scroll_load||sa.loading):((W=a(".js-load-more")).text(sa.load_more),W.click(O)),ba&&W&&W.hide(),U&&setInterval(function(){P.find(".js-vote").length&&La()},3e4),U&&T&&setInterval(function(){Ha(function(){E()})},T),ea=a('<div class="image-audit" style="position: absolute; top: -9999px; left: -9999px; width: 0px; height: 0px"></div>'),a("body").append(ea),a(document).trigger("load",[{id:X}]),Stackla.log("[inside] initialize finish")},render:Fa,addContent:Ha,changeFilterCallback:Ka=function(a,b,c){var d=$;G(),$=a,lb=c,kb=b,H(),l(_a?function(){Qa(function(){window.fluidWidgetCustomCallbacks.onCompleteChangeFilter($,d),E(),I()})}:function(){Fa(function(){window.fluidWidgetCustomCallbacks.onCompleteChangeFilter($,d),E(),I()})})},searchFilterCallback:function(a){G(),hb=a,H(),l(_a?function(){Qa(function(){E(),I()})}:function(){Fa(function(){E(),I()})})},initCompleteCallback:function(a,b){a?FluidWidgetCommon.buildInitCompleteCallback(Sa,J,F,Ta,N,ca,tb,gb,aa,V)(a):function(a){if(a.init_timestamp){var b=new Date(parseInt(a.init_timestamp,10));rb.getDuration(b,ua),P.imagesLoaded(function(){a={id:X,initTime:b,benchmarks:{apiRequest:va,apiReceive:wa,render:ua,image:new Date},name:pa,params:ta,parentHost:a.parent_host,parentUrl:a.parent_url,stack:db,type:qa},xa.enable_track_widget_load_time&&rb.track(a)})}}({embed_timestamp:b.embed_timestamp,init_timestamp:b.init_timestamp,parent_host:b.parent_host,parent_url:b.parent_url})},expandedTile:K,allContentData:tb,resizeTiles:E,getComments:function(b,c,d){a.ajax({url:"/widget/comments",type:"get",data:{stack_id:aa,tile_id:b,last_comment_id:c,how_many:d},success:function(a){N("getCommentsCallback",{tileId:b,data:a})}})},getCustomData:function(){return Cb},postComment:function(b,c,d,e){var f=u();f&&(f="?"+f),a.ajax({url:"/widget/save_comment/"+b+f,type:"post",data:{stack_id:aa,tile_id:c,username:d,comment:e},cache:!1,success:function(b){b&&b.success&&a(document).trigger("tileComment",[{_id:c}]),N("postCommentCallback",{data:b,tileId:c})}})},getShortUrl:Va=function(a,b,c,d){FluidWidgetCommon.getShortUrl(a,b,c,d,N,ca,tb,aa)},saveShareCount:L,scrollToPageBottom:function(){if(!Db&&!Eb&&Fb){if("scroll"!==Da)return;Db=!0,Ea.text(sa.scroll_load||sa.loading),window.fluidWidgetCustomCallbacks.onScrollLoad(P.find(".tile"),Ea),Ea.animate({bottom:"+=100"},100),ab+=1,(_a?Qa:Fa)(function(){E(),setTimeout(function(){Db=!1,N("moreLoad",{page:ab}),EventMixin.emit("moreLoad",[{page:ab,widgetId:X,hasMore:!Eb}]),Eb?(Ea.text(sa.scroll_end),window.fluidWidgetCustomCallbacks.onScrollEnd(P.find(".tile"),Ea),setTimeout(function(){Ea.animate({bottom:"-=100"},500)},4e3)):Ea.animate({bottom:"-=100"},500)},500)})}},pinnedData:vb,safeContentReady:function b(c){Stackla.log("safeContentReady() is executed.");var d=0;for(var e in Gb)!0===Gb[e].safe_image&&(d+=1);if(d>=Xa){P.isotope("remove",a(".tile"));var f=0;for(var e in Gb){if(f>Xa)break;!0===Gb[e].safe_image&&(y(Gb[e],-1),f+=1)}E(),setTimeout(function(){c(f)},1e3)}else setTimeout(function(){b(c)},500)},safeContentStorage:Gb,safeContentTileIds:[],newSafeContentReady:function(a){for(var b=Lb.length;b--;)!0===Lb[b].safe_image&&(y(Lb[b],0),Lb.splice(b,1));E(),setTimeout(function(){a()},1e3)},likeDislike:wb,competitionVote:Oa,openClaimedLightbox:w,parseMessage:q,setUniqueId:function(a){Bb=a},setCustomData:function(a){Cb=a},crossSiteAction:N,expandInlineSharingTool:function(b){var c=a(b).closest(".tile")[0],d=a(c).attr("id");FluidWidgetCommon.invokeParentMethod(Bb,"getSharingRedirectUrl",d).then(function(b){Va(X,b,d,function(b){var d=b.result.url;a.data(c,"short-url",d);var e=a(c).find(".tile-interaction-share");e.find(".tile-sharing-expanded").animate({opacity:"toggle"},200),e.toggleClass("on")})})},changeGeohashCallback:function(a){ra=a,Ka($,kb,lb)},getPreviousTileIdByCurrentTileId:function(a){return FluidWidgetCommon.getPreviousTileIdByCurrentTileId(tb,a)},getNextTileIdByCurrentTileId:function(a){return FluidWidgetCommon.getNextTileIdByCurrentTileId(tb,a)},getUniqueId:function(){return Bb},renderTiles:function(a){G(),ba=a,H(),_a?Qa(function(){E(),I()}):Fa(function(){E(),I()})},loadMore:O};return FluidWidgetCommon.bindInlineShareFunctions(Mb,function(a,b){void 0!==b&&b?window.open(a,"_top"):window.open(a,"_blank")},function(a){return FluidWidgetCommon.getShareTextByTileId(a,tb,ca)},function(a){return FluidWidgetCommon.getShareTitleByTileId(a,tb,ca)},L),_.assign(Mb,EventMixin),Mb}(jQuery);var h=_.defaults({scrollToPageBottom:function(a){a.scrollToPageBottom()}},FluidWidgetCommon.getWaterfallCarouselCommonCrossSiteHandlers());FluidWidgetCommon.bindCrossSiteHandler(Widget,h),function(){var a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0;a&&a.register(h,"handlers","/home/ec2-user/workspace/staging/stackla-web/app/media/js/widget/base_waterfall/base_waterfall.entry.js")}(),function(){var b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0;b&&b(a)}()}.call(this,c(2)(a))},286:function(a,b,c){(function(a){function b(a){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,!function(c,d){"use strict";"object"===b(a)&&a.exports?a.exports=d():_.set(c,"Stackla.Widget.User",d())}(this,function(){"use strict";return{convertImageToHttps:function(a,b){var c=_.get(window,"httpsRules."+b+".rules");return c?(c.forEach(function(b){var c=new RegExp(b.from);if(c.test(a))return a.replace(c,b.to)}),a):a},getAvatarUrl:function(a){var b="";return"twitter"===a.source?b="//twitter.com/"+a.user:"facebook"===a.source?b=a.original_url:"instagram"===a.source?b="//instagram.com/"+a.user:"pinterest"===a.source?b="//pinterest.com/"+a.source_user_id.replace(/\|/,"/"):"flickr"===a.source?b="//www.flickr.com/photos/"+a.source_user_id:"youtube"===a.source?b=a.youtube_channel_id?"//www.youtube.com/channel/"+a.youtube_channel_id:"//www.youtube.com/user/"+a.user:"rss"===a.source||"wordpress"===a.source?b=a.original_url.replace(/^(http:|https:)/i,""):"gplus"===a.source?b="//plus.google.com/"+a.source_user_id:"tumblr"===a.source?b=a.original_url.replace(/^(http:|https:)/i,""):"weibo"===a.source&&(b="//weibo.com/"+a.source_user_id),b},decorateTile:function(a,b){return a.avatar_link=this.getAvatarUrl(a),a.avatar_src=this.convertImageToHttps(a.avatar,a.source),a.name?a.avatar_alt_text=a.name:a.user&&(a.avatar_alt_text=a.user),a.avatar_alt_text&&(a.avatar_alt_text+=null===a.avatar_alt_text.match(/s$/)?"'s Avatar":"' Avatar"),"youtube"!==a.source||a.avatar||(a.avatar_src="https://i3.ytimg.com/i/"+a.source_user_id+"/1.jpg"),a.name?a.user_handle=a.name:a.user?a.user_handle=a.user:a.source_user_id&&(a.user_handle=a.source_user_id),a.special_user_handle=!("twitter"!==a.source&&"instagram"!==a.source||!a.user),a}}})}).call(this,c(96)(a))},96:function(a,b){a.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,get:function(){return a.i}}),a.webpackPolyfill=1),a}}});